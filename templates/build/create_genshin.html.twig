{% extends 'base.html.twig' %}

{% block title %}Nueva Build Genshin - GameHub{% endblock %}

{% block stylesheets %}
    {# Importamos el base de Genshin y el específico de la build #}
    <link rel="stylesheet" href="{{ asset('css/styleBlogGENSHIN.css') }}">
    <link rel="stylesheet" href="{{ asset('css/styleBuildGenshin.css') }}">

    <style>
        /* --- AJUSTES DINÁMICOS DEL HEADER (ESTILO GENSHIN) --- */
        header .login-container {
            display: flex;
            align-items: center;
            gap: 15px;
            background: transparent !important;
            border: none !important;
            box-shadow: none !important;
            padding: 0 !important;
            width: auto !important;
        }

        .user-info {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            text-align: right;
        }

        .welcome-text {
            color: #c2b46c; /* Dorado Genshin */
            font-weight: bold;
            font-size: 0.9rem;
        }

        .logout-link {
            color: #ffffff;
            font-size: 0.75rem;
            text-decoration: underline !important;
            opacity: 0.7;
        }

        .logout-link:hover {
            opacity: 1;
            color: #ffadad;
        }
    </style>
{% endblock %}

{% block body %}
    {# INCLUSIÓN DEL HEADER MODULAR - Usamos GOLD por defecto para Genshin #}
    {% include 'partials/header.html.twig' with {'iconColor': 'GOLD'} %}

    <main>
        <div class="container">
            <h2 class="build-title-genshin">Nueva Build: Genshin Impact</h2>

            {{ form_start(form) }}
            <div class="build-grid">

                {# BLOQUE PERSONAJE #}
                <div class="col-left">
                    <div class="build-section-card">
                        <h4 class="section-subtitle">Datos del Personaje</h4>
                        {{ form_row(form.nombre) }}
                        {{ form_row(form.personajePlantilla) }}
                        <div style="display: flex; gap: 10px;">
                            <div style="flex: 1;">{{ form_row(form.nivel) }}</div>
                            <div style="flex: 1;">{{ form_row(form.dupeNum) }}</div>
                        </div>
                        <hr>
                        <h4 class="section-subtitle">Arma Equipada</h4>
                        {{ form_row(form.arma) }}

                        <hr>
                        <h4 class="section-subtitle">Habilidades</h4>
                        <div id="habilidades-container" data-prototype="{{ form_widget(form.personajeHabilidades.vars.prototype)|e('html_attr') }}">
                            {# Aquí se inyectarán las habilidades vía JS #}
                        </div>
                    </div>
                </div>

                {# BLOQUE ARTEFACTOS #}
                <div class="col-right">
                    <div class="build-section-card">
                        <h4 class="section-subtitle">Conjunto de Artefactos</h4>
                        <div class="subgrid-artefactos">
                            {{ form_row(form.artefacto_flor) }}
                            <hr>
                            {{ form_row(form.artefacto_pluma) }}
                            <hr>
                            {{ form_row(form.artefacto_reloj) }}
                            <hr>
                            {{ form_row(form.artefacto_copa) }}
                            <hr>
                            {{ form_row(form.artefacto_casco) }}
                        </div>
                    </div>
                </div>

            </div>

            <button type="submit" class="btn-save-genshin">Forjar Nueva Build</button>
            {{ form_end(form) }}
        </div>
    </main>

    <footer>
        Game Hub &copy; 2025-2026
    </footer>
    {% block javascripts %}
        {{ parent() }}
        <script type="text/javascript" src="{{ asset('js/filtroArmaPersonaje.js') }}"></script>
        <script type="text/javascript" src="{{ asset('js/habilidadesPersonaje.js') }}"></script>
    {% endblock %}

{% endblock %}