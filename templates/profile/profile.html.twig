{% extends 'base.html.twig' %}

{% block title %}Mi Perfil - GameHub{% endblock %}

{% block stylesheets %}
    {# Cargamos el CSS específico para el diseño del perfil #}
    <link rel="stylesheet" href="{{ asset('css/styleProfile.css') }}">
    {# Importante: Cargamos también styleLogin o styleIndex para heredar los estilos del Header #}
    <link rel="stylesheet" href="{{ asset('css/styleLogin.css') }}">
{% endblock %}

{% block body %}

    {# INCLUSIÓN DEL HEADER MODULAR #}
    {% include 'partials/header.html.twig' %}

    <main>
        <div class="profile-container">
            {# Mensajes de éxito/error al actualizar ajustes #}
            {% for message in app.flashes('success') %}
                <div class="alert alert-success" style="color: #c2b46c; text-align: center; margin-bottom: 20px;">
                    {{ message }}
                </div>
            {% endfor %}


            {# --- Banner Superior --- #}
            <div class="profile-banner">
                {# --- Icono de Ajustes (Engranaje) --- #}
                <a href="{{ path('app_settings') }}" class="settings-icon" title="Configuración del Perfil">
                    <img src="{{ asset('assets/img/settingsIconGOLD.webp') }}" alt="Ajustes">
                </a>
            </div>

            {# --- Avatar del Usuario --- #}
            <div class="profile-avatar">
                {# CORRECCIÓN: Usamos app.user.fotoPerfil en lugar de app.user.avatar #}
                {% if app.user.fotoPerfil %}
                    <img src="{{ asset('uploads/avatars/' ~ app.user.fotoPerfil) }}" alt="Avatar de {{ app.user.userName }}">
                {% else %}
                    {# Si no hay foto, usamos el placeholder #}
                    <img src="{{ asset('assets/img/default_avatar.webp') }}" alt="Avatar por defecto">
                {% endif %}
            </div>

            {# --- Nombre de Usuario --- #}
            <h2 class="profile-username">
                {# Mostramos el nombre de usuario o el email si no tiene #}
                {{ app.user.userName|default(app.user.userIdentifier) }}
            </h2>

            {# --- Tarjetas de Contenido --- #}
            <div class="profile-cards-container">
                {# Próximos pasos: Enlazar a las listas reales #}
                <a href="#" class="profile-card">
                    Mis builds
                </a>

                <a href="#" class="profile-card">
                    Mis publicaciones
                </a>
            </div>
        </div>
    </main>

    <footer>
        Game Hub &copy; 2025-2026
    </footer>
{% endblock %}